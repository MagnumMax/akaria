import { state, ICONS } from "../state.js";


function renderTasksPage() { const page = document.getElementById('page-tasks'); const tasksByStatus = { Overdue: tasksData.filter(t => t.status === 'Overdue' && !t.completed), Today: tasksData.filter(t => t.status === 'Today' && !t.completed), Upcoming: tasksData.filter(t => t.status === 'Upcoming' && !t.completed), Completed: tasksData.filter(t => t.completed) }; const assistantName = state.currentUserRole === 'CEO' ? 'Leonardo' : 'Jessica'; page.innerHTML = `< div > <div class="flex justify-end items-center mb-4"><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-3 font-medium">Add Task</button></div>${Object.entries(tasksByStatus).map(([status, tasks]) => tasks.length > 0 ? `<div class="mb-6"><h3 class="font-semibold mb-2 text-lg">${status} (${tasks.length})</h3><div class="space-y-2">${tasks.map(task => `<div class="bg-white border rounded-md p-3 flex items-center gap-3"><input type="checkbox" ${task.completed ? 'checked' : ''} class="h-5 w-5"><div class="flex-1"><p class="font-medium ${task.completed ? 'line-through text-muted-foreground' : ''}">${task.title}</p><div class="flex items-center gap-2"><a href="#deal-details/1" class="text-xs text-muted-foreground hover:underline">Related Deal: Villa in Palm Jumeirah</a>${task.createdBy === 'Jessica' ? `<span class="flex items-center gap-1 text-xs text-accent bg-blue-50 px-2 py-0.5 rounded-full" title="Created by ${assistantName}">${ICONS.bot} ${assistantName}</span>` : ''}</div></div><span class="text-sm font-medium ${status === 'Overdue' ? 'text-red-600' : 'text-muted-foreground'}">${task.due}</span></div>`).join('')}</div></div>` : '').join('')}</div > `; }


export {renderTasksPage};
